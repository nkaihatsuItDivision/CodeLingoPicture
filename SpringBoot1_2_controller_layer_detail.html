<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controller層（リクエスト処理）の詳細図</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            max-width: 1100px;
            width: 100%;
        }
        
        .title {
            text-align: center;
            color: #ff9500;
            margin-bottom: 30px;
            font-size: 24px;
            font-weight: bold;
        }
        
        .java-skills-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 12px;
            padding: 20px;
            margin: 30px 0;
        }
        
        .skills-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .skills-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .skill-item {
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            backdrop-filter: blur(10px);
        }
        
        .skill-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }
        
        .skill-title {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .skill-desc {
            font-size: 14px;
            line-height: 1.4;
        }
        
        .controller-structure {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin: 30px 0;
            border: 2px solid #e9ecef;
        }
        
        .structure-title {
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 20px;
        }
        
        .code-example {
            background: #2c3e50;
            color: #ecf0f1;
            border-radius: 8px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.5;
            margin: 15px 0;
            overflow-x: auto;
        }
        
        .annotation {
            color: #f39c12;
        }
        
        .keyword {
            color: #3498db;
        }
        
        .string {
            color: #e67e22;
        }
        
        .comment {
            color: #95a5a6;
            font-style: italic;
        }
        
        .method-name {
            color: #2ecc71;
        }
        
        .request-mapping {
            background: linear-gradient(135deg, #20bf6b 0%, #01a3a4 100%);
            color: white;
            border-radius: 12px;
            padding: 20px;
            margin: 30px 0;
        }
        
        .mapping-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .mapping-examples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .mapping-item {
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 15px;
            backdrop-filter: blur(10px);
        }
        
        .mapping-annotation {
            font-family: 'Courier New', monospace;
            font-weight: bold;
            margin-bottom: 8px;
            color: #ffeaa7;
        }
        
        .mapping-desc {
            font-size: 14px;
            line-height: 1.4;
        }
        
        .controller-flow {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 30px 0;
        }
        
        .flow-step {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            border: 3px solid #ff9500;
        }
        
        .step-number {
            background: #ff9500;
            color: white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-weight: bold;
            font-size: 18px;
        }
        
        .step-title {
            font-size: 14px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 8px;
        }
        
        .step-desc {
            font-size: 12px;
            color: #555;
            line-height: 1.4;
        }
        
        .controller-responsibilities {
            background: linear-gradient(135deg, #ff6b6b 0%, #ffa500 100%);
            color: white;
            border-radius: 12px;
            padding: 20px;
            margin: 30px 0;
        }
        
        .responsibilities-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .responsibilities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .responsibility-item {
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            backdrop-filter: blur(10px);
        }
        
        .responsibility-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }
        
        .responsibility-title {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .responsibility-desc {
            font-size: 14px;
            line-height: 1.4;
        }
        
        @media (max-width: 768px) {
            .controller-flow {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="title">
            🎮 Controller層（リクエスト処理）の詳細図
        </div>
        
        <div class="java-skills-section">
            <div class="skills-title">🚀 Week 2-5 Java技術の統合活用</div>
            <div class="skills-grid">
                <div class="skill-item">
                    <div class="skill-icon">🔢</div>
                    <div class="skill-title">Week 2: 基本構文</div>
                    <div class="skill-desc">
                        変数・条件分岐→<br>
                        リクエスト判定処理
                    </div>
                </div>
                <div class="skill-item">
                    <div class="skill-icon">🔧</div>
                    <div class="skill-title">Week 3: メソッド</div>
                    <div class="skill-desc">
                        クラス・メソッド→<br>
                        Service呼び出し
                    </div>
                </div>
                <div class="skill-item">
                    <div class="skill-icon">🏗️</div>
                    <div class="skill-title">Week 4: OOP基礎</div>
                    <div class="skill-desc">
                        オブジェクト指向→<br>
                        コンポーネント設計
                    </div>
                </div>
                <div class="skill-item">
                    <div class="skill-title">Week 5: OOP応用</div>
                    <div class="skill-desc">
                        例外処理・Lombok→<br>
                        エラーハンドリング
                    </div>
                </div>
            </div>
        </div>
        
        <div class="controller-structure">
            <div class="structure-title">📋 Controllerクラスの構造</div>
                            <div class="code-example">
<span class="comment">// Week 2-5のJava技術が統合されたController</span><br>
<span class="annotation">@Controller</span>  <span class="comment">// Spring Bootが自動認識</span><br>
<span class="keyword">public class</span> StudentController {<br>
<br>
    <span class="annotation">@Autowired</span>  <span class="comment">// Week 4 OOP: 依存性注入</span><br>
    <span class="keyword">private</span> StudentService studentService;<br>
<br>
    <span class="comment">// Week 3 メソッド: HTTPリクエスト処理メソッド</span><br>
    <span class="annotation">@GetMapping</span>(<span class="string">"/students"</span>)<br>
    <span class="keyword">public</span> String <span class="method-name">showStudents</span>(Model model) {<br>
        <span class="comment">// Week 2 変数: データ取得</span><br>
        List&lt;Student&gt; students = studentService.findAll();<br>
        <br>
        <span class="comment">// Week 2 条件分岐の活用例</span><br>
        <span class="keyword">if</span> (students.isEmpty()) {<br>
            model.addAttribute(<span class="string">"message"</span>, <span class="string">"学生データがありません"</span>);<br>
        }<br>
        <br>
        <span class="comment">// Viewにデータを渡す</span><br>
        model.addAttribute(<span class="string">"students"</span>, students);<br>
        <br>
        <span class="comment">// 表示するテンプレートを指定</span><br>
        <span class="keyword">return</span> <span class="string">"students/index"</span>;<br>
    }<br>
<br>
    <span class="comment">// Week 5 例外処理の活用</span><br>
    <span class="annotation">@PostMapping</span>(<span class="string">"/students"</span>)<br>
    <span class="keyword">public</span> String <span class="method-name">registerStudent</span>(<span class="annotation">@Valid</span> StudentData data,<br>
                                      BindingResult result) {<br>
        <span class="keyword">try</span> {<br>
            <span class="keyword">if</span> (result.hasErrors()) {<br>
                <span class="keyword">return</span> <span class="string">"students/form"</span>;<br>
            }<br>
            studentService.save(data);<br>
            <span class="keyword">return</span> <span class="string">"redirect:/students"</span>;<br>
        } <span class="keyword">catch</span> (Exception e) {<br>
            <span class="comment">// Week 5 例外処理</span><br>
            <span class="keyword">return</span> <span class="string">"error"</span>;<br>
        }<br>
    }<br>
}
            </div>
        </div>
        
        <div class="request-mapping">
            <div class="mapping-title">🗺️ HTTPリクエストマッピング</div>
            <div class="mapping-examples">
                <div class="mapping-item">
                    <div class="mapping-annotation">@GetMapping("/students")</div>
                    <div class="mapping-desc">
                        <strong>学生一覧表示</strong><br>
                        GETリクエストでデータ取得<br>
                        読み取り専用操作
                    </div>
                </div>
                <div class="mapping-item">
                    <div class="mapping-annotation">@PostMapping("/students")</div>
                    <div class="mapping-desc">
                        <strong>学生新規登録</strong><br>
                        POSTリクエストでデータ送信<br>
                        データ作成操作
                    </div>
                </div>
                <div class="mapping-item">
                    <div class="mapping-annotation">@GetMapping("/students/{id}")</div>
                    <div class="mapping-desc">
                        <strong>学生詳細表示</strong><br>
                        パスパラメータでID指定<br>
                        個別データ取得
                    </div>
                </div>
                <div class="mapping-item">
                    <div class="mapping-annotation">@DeleteMapping("/students/{id}")</div>
                    <div class="mapping-desc">
                        <strong>学生削除処理</strong><br>
                        DELETEリクエストでデータ削除<br>
                        Week 10で学習予定
                    </div>
                </div>
            </div>
        </div>
        
        <div class="controller-flow">
            <div class="flow-step">
                <div class="step-number">1</div>
                <div class="step-title">リクエスト受信</div>
                <div class="step-desc">
                    ブラウザからの<br>
                    HTTPリクエストを<br>
                    @GetMappingで受信
                </div>
            </div>
            
            <div class="flow-step">
                <div class="step-number">2</div>
                <div class="step-title">パラメータ処理</div>
                <div class="step-desc">
                    リクエストパラメータ<br>
                    やパスパラメータを<br>
                    Java変数に変換
                </div>
            </div>
            
            <div class="flow-step">
                <div class="step-number">3</div>
                <div class="step-title">Service呼び出し</div>
                <div class="step-desc">
                    ビジネスロジック処理<br>
                    のためService層の<br>
                    メソッドを呼び出し
                </div>
            </div>
            
            <div class="flow-step">
                <div class="step-number">4</div>
                <div class="step-title">データ受け取り</div>
                <div class="step-desc">
                    Service層から返された<br>
                    処理結果データを<br>
                    受け取り
                </div>
            </div>
            
            <div class="flow-step">
                <div class="step-number">5</div>
                <div class="step-title">Model設定</div>
                <div class="step-desc">
                    View層に渡すため<br>
                    Modelオブジェクトに<br>
                    データを設定
                </div>
            </div>
            
            <div class="flow-step">
                <div class="step-number">6</div>
                <div class="step-title">View指定</div>
                <div class="step-desc">
                    表示するテンプレート<br>
                    ファイル名を返して<br>
                    画面を指定
                </div>
            </div>
        </div>
        
        <div class="controller-responsibilities">
            <div class="responsibilities-title">📋 Controller層の責務</div>
            <div class="responsibilities-grid">
                <div class="responsibility-item">
                    <div class="responsibility-icon">📨</div>
                    <div class="responsibility-title">リクエスト受信</div>
                    <div class="responsibility-desc">
                        ブラウザからのHTTP<br>
                        リクエストを受け取る
                    </div>
                </div>
                <div class="responsibility-item">
                    <div class="responsibility-icon">🔄</div>
                    <div class="responsibility-title">データ変換</div>
                    <div class="responsibility-desc">
                        リクエストパラメータを<br>
                        Javaオブジェクトに変換
                    </div>
                </div>
                <div class="responsibility-item">
                    <div class="responsibility-icon">🎯</div>
                    <div class="responsibility-title">処理制御</div>
                    <div class="responsibility-desc">
                        適切なService層メソッド<br>
                        を呼び出して処理制御
                    </div>
                </div>
                <div class="responsibility-item">
                    <div class="responsibility-icon">🌉</div>
                    <div class="responsibility-title">M-V橋渡し</div>
                    <div class="responsibility-desc">
                        ModelとViewの間で<br>
                        データの受け渡しを制御
                    </div>
                </div>
                <div class="responsibility-item">
                    <div class="responsibility-icon">📤</div>
                    <div class="responsibility-title">レスポンス制御</div>
                    <div class="responsibility-desc">
                        適切なView（HTML）を<br>
                        選択してレスポンス
                    </div>
                </div>
                <div class="responsibility-item">
                    <div class="responsibility-icon">⚠️</div>
                    <div class="responsibility-title">エラー処理</div>
                    <div class="responsibility-desc">
                        例外発生時の適切な<br>
                        エラーページ表示
                    </div>
                </div>
            </div>
        </div>
        
        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 12px; padding: 20px; margin: 30px 0; text-align: center;">
            <div style="font-size: 18px; font-weight: bold; margin-bottom: 15px;">
                🎉 Week 2-5技術の完全統合
            </div>
            <div style="font-size: 14px; line-height: 1.6;">
                Week 2の変数・条件分岐、Week 3のメソッド・クラス、<br>
                Week 4のオブジェクト指向、Week 5の例外処理・Lombokが<br>
                Controller層で美しく統合されます！
            </div>
        </div>
    </div>
</body>
</html>