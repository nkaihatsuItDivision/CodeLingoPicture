<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>フィールドとコンストラクタの連携実践</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: white;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }
        .container {
            max-width: 1300px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .title {
            text-align: center;
            color: #2c3e50;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 30px;
            border-bottom: 3px solid #16a085;
            padding-bottom: 10px;
        }
        .integration-overview {
            background: linear-gradient(135deg, #1dd1a1, #10ac84);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
        }
        .class-structure {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }
        .fields-section, .constructors-section {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 25px;
        }
        .fields-section { border-left: 5px solid #3498db; }
        .constructors-section { border-left: 5px solid #e74c3c; }
        .section-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .field-item, .constructor-item {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        .validation-demo {
            background: linear-gradient(135deg, #fd79a8, #fdcb6e);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 30px 0;
        }
        .validation-title {
            font-size: 20px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
        }
        .validation-examples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        .validation-card {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
        }
        .validation-code {
            background: rgba(0,0,0,0.3);
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }
        .execution-flow {
            background: #2d3748;
            color: #e2e8f0;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
        }
        .flow-title {
            color: #63b3ed;
            font-size: 20px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 25px;
        }
        .flow-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        .flow-step {
            background: #4a5568;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            position: relative;
        }
        .step-number {
            background: #63b3ed;
            color: #1a202c;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-weight: bold;
            font-size: 18px;
        }
        .benefits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .benefit-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            transform: translateY(0);
            transition: transform 0.3s ease;
        }
        .benefit-card:hover {
            transform: translateY(-5px);
        }
        .benefit-icon {
            font-size: 40px;
            margin-bottom: 15px;
        }
        .benefit-title {
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 10px;
        }
        .code-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 30px 0;
        }
        .comparison-box {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            overflow: hidden;
        }
        .comparison-header {
            padding: 15px;
            color: white;
            font-weight: bold;
            text-align: center;
        }
        .before-header { background: #e74c3c; }
        .after-header { background: #27ae60; }
        .comparison-content {
            padding: 20px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.4;
        }
        .result-showcase {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 25px;
            margin: 30px 0;
        }
        .result-title {
            color: #856404;
            font-weight: bold;
            font-size: 18px;
            text-align: center;
            margin-bottom: 20px;
        }
        .output-box {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="title">🔗 フィールドとコンストラクタの連携実践</div>
        
        <div class="integration-overview">
            <div style="font-size: 22px; font-weight: bold; margin-bottom: 15px;">🎯 連携の目的</div>
            <div>レッスン4.4で学んだ<strong>フィールド技術</strong>と今回の<strong>コンストラクタ技術</strong>を組み合わせ</div>
            <div><strong>安全で柔軟で実用的</strong>なクラス設計を実現します</div>
        </div>

        <div class="class-structure">
            <div class="fields-section">
                <div class="section-title">
                    <span>📊</span> フィールド（レッスン4.4の技術）
                </div>
                <div class="field-item">
                    <div style="color: #666; margin-bottom: 5px;">// 適切なデータ型選択</div>
                    <div><span style="color: #0066cc;">private</span> <span style="color: #cc0066;">String</span> name;</div>
                </div>
                <div class="field-item">
                    <div style="color: #666; margin-bottom: 5px;">// 年齢の妥当な範囲</div>
                    <div><span style="color: #0066cc;">private</span> <span style="color: #cc0066;">int</span> age;</div>
                </div>
                <div class="field-item">
                    <div style="color: #666; margin-bottom: 5px;">// 精密な数値計算</div>
                    <div><span style="color: #0066cc;">private</span> <span style="color: #cc0066;">double</span> gpa;</div>
                </div>
                <div class="field-item">
                    <div style="color: #666; margin-bottom: 5px;">// コレクション初期化</div>
                    <div><span style="color: #0066cc;">private</span> List&lt;String&gt; subjects;</div>
                </div>
                <div class="field-item">
                    <div style="color: #666; margin-bottom: 5px;">// クラス変数で統計管理</div>
                    <div><span style="color: #0066cc;">private static</span> <span style="color: #cc0066;">int</span> totalStudents;</div>
                </div>
            </div>

            <div class="constructors-section">
                <div class="section-title">
                    <span>🔧</span> コンストラクタ（今回の技術）
                </div>
                <div class="constructor-item">
                    <div style="color: #666; margin-bottom: 5px;">// デフォルト初期化</div>
                    <div><span style="color: #0066cc;">public</span> <span style="color: #cc6600;">Student</span>() { ... }</div>
                </div>
                <div class="constructor-item">
                    <div style="color: #666; margin-bottom: 5px;">// 名前指定初期化</div>
                    <div><span style="color: #0066cc;">public</span> <span style="color: #cc6600;">Student</span>(String name) { ... }</div>
                </div>
                <div class="constructor-item">
                    <div style="color: #666; margin-bottom: 5px;">// 名前・年齢指定</div>
                    <div><span style="color: #0066cc;">public</span> <span style="color: #cc6600;">Student</span>(String name, int age) { ... }</div>
                </div>
                <div class="constructor-item">
                    <div style="color: #666; margin-bottom: 5px;">// 全項目指定初期化</div>
                    <div><span style="color: #cc6600;">Student</span>(String name, int age, double gpa) { ... }</div>
                </div>
            </div>
        </div>

        <div class="execution-flow">
            <div class="flow-title">⚡ オブジェクト作成時の実行フロー</div>
            <div class="flow-steps">
                <div class="flow-step">
                    <div class="step-number">1</div>
                    <div style="font-weight: bold; margin-bottom: 10px;">newキーワード実行</div>
                    <div>Student s = new Student("田中", 20, 3.5);</div>
                </div>
                <div class="flow-step">
                    <div class="step-number">2</div>
                    <div style="font-weight: bold; margin-bottom: 10px;">メモリ領域確保</div>
                    <div>フィールド用メモリ割り当て</div>
                </div>
                <div class="flow-step">
                    <div class="step-number">3</div>
                    <div style="font-weight: bold; margin-bottom: 10px;">コンストラクタ実行</div>
                    <div>this()チェーン + バリデーション</div>
                </div>
                <div class="flow-step">
                    <div class="step-number">4</div>
                    <div style="font-weight: bold; margin-bottom: 10px;">オブジェクト完成</div>
                    <div>安全に初期化された状態</div>
                </div>
            </div>
        </div>

        <div class="validation-demo">
            <div class="validation-title">🛡️ バリデーション機能の実践</div>
            <div class="validation-examples">
                <div class="validation-card">
                    <div style="font-weight: bold; margin-bottom: 10px;">名前のバリデーション</div>
                    <div class="validation-code">
if (name == null || name.trim().isEmpty()) {
    System.out.println("警告：名前が空です");
    this.name = "名前未設定";
} else {
    this.name = name.trim();
}
                    </div>
                </div>
                <div class="validation-card">
                    <div style="font-weight: bold; margin-bottom: 10px;">年齢のバリデーション</div>
                    <div class="validation-code">
if (age < 15 || age > 100) {
    System.out.println("警告：年齢が範囲外");
    this.age = 18;
} else {
    this.age = age;
}
                    </div>
                </div>
                <div class="validation-card">
                    <div style="font-weight: bold; margin-bottom: 10px;">GPAのバリデーション</div>
                    <div class="validation-code">
if (gpa < 0.0 || gpa > 4.0) {
    System.out.println("警告：GPA範囲外");
    this.gpa = 0.0;
} else {
    this.gpa = gpa;
}
                    </div>
                </div>
            </div>
        </div>

        <div class="code-comparison">
            <div class="comparison-box">
                <div class="comparison-header before-header">❌ レッスン4.4以前（フィールドのみ）</div>
                <div class="comparison-content">
                    <div style="color: #666;">// 固定的な初期化のみ</div>
                    <div style="color: #0066cc;">public class</div> Student {<br>
                    &nbsp;&nbsp;<span style="color: #0066cc;">private</span> String name = <span style="color: #990000;">""</span>;<br>
                    &nbsp;&nbsp;<span style="color: #0066cc;">private</span> <span style="color: #cc0066;">int</span> age = <span style="color: #cc0066;">18</span>;<br>
                    &nbsp;&nbsp;<span style="color: #0066cc;">private</span> <span style="color: #cc0066;">double</span> gpa = <span style="color: #cc0066;">0.0</span>;<br><br>
                    &nbsp;&nbsp;<span style="color: #666;">// 全学生が同じ初期値...</span><br>
                    }<br><br>
                    <div style="color: #e74c3c;">問題：柔軟性がない</div>
                </div>
            </div>
            <div class="comparison-box">
                <div class="comparison-header after-header">✅ レッスン4.5完了（フィールド＋コンストラクタ）</div>
                <div class="comparison-content">
                    <div style="color: #666;">// 柔軟で安全な初期化</div>
                    <div style="color: #0066cc;">public class</div> Student {<br>
                    &nbsp;&nbsp;<span style="color: #0066cc;">private</span> String name;<br>
                    &nbsp;&nbsp;<span style="color: #0066cc;">private</span> <span style="color: #cc0066;">int</span> age;<br>
                    &nbsp;&nbsp;<span style="color: #0066cc;">private</span> <span style="color: #cc0066;">double</span> gpa;<br><br>
                    &nbsp;&nbsp;<span style="color: #0066cc;">public</span> <span style="color: #cc6600;">Student</span>(String name, <span style="color: #cc0066;">int</span> age, <span style="color: #cc0066;">double</span> gpa) {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #666;">// バリデーション＋初期化</span><br>
                    &nbsp;&nbsp;}<br>
                    }<br><br>
                    <div style="color: #27ae60;">解決：柔軟で安全</div>
                </div>
            </div>
        </div>

        <div class="benefits-grid">
            <div class="benefit-card">
                <div class="benefit-icon">🔒</div>
                <div class="benefit-title">安全性の確保</div>
                <div>バリデーション機能により不正値を防止</div>
            </div>
            <div class="benefit-card">
                <div class="benefit-icon">🎯</div>
                <div class="benefit-title">柔軟性の向上</div>
                <div>様々な初期化パターンに対応</div>
            </div>
            <div class="benefit-card">
                <div class="benefit-icon">♻️</div>
                <div class="benefit-title">効率性の実現</div>
                <div>this()による重複コード削減</div>
            </div>
            <div class="benefit-card">
                <div class="benefit-icon">🛡️</div>
                <div class="benefit-title">堅牢性の向上</div>
                <div>エラーハンドリングによる安定動作</div>
            </div>
        </div>

        <div class="result-showcase">
            <div class="result-title">🎊 実行結果の例</div>
            <div class="output-box">
<span style="color: #74b9ff;">// 正常な値での作成</span><br>
Student student1 = new Student("田中太郎", 20, 3.5);<br>
<span style="color: #00b894;">出力: 学生が作成されました（ID: 1）</span><br><br>

<span style="color: #74b9ff;">// バリデーション機能のテスト</span><br>
Student student2 = new Student("", 150, 5.0);<br>
<span style="color: #fdcb6e;">出力: 警告：名前が空です</span><br>
<span style="color: #fdcb6e;">出力: 警告：年齢が範囲外です</span><br>
<span style="color: #fdcb6e;">出力: 警告：GPAが範囲外です</span><br>
<span style="color: #00b894;">出力: 学生が作成されました（ID: 2）</span><br><br>

<span style="color: #74b9ff;">// 情報表示</span><br>
student1.showInfo();<br>
<span style="color: #00b894;">名前：田中太郎, 年齢：20, GPA：3.5</span><br><br>

student2.showInfo();<br>
<span style="color: #00b894;">名前：名前未設定, 年齢：18, GPA：0.0</span>
            </div>
        </div>

        <div style="background: #d1ecf1; border: 1px solid #bee5eb; border-radius: 10px; padding: 25px; text-align: center;">
            <div style="color: #0c5460; font-weight: bold; font-size: 20px; margin-bottom: 15px;">🏆 連携による成果</div>
            <div style="color: #0c5460; line-height: 1.8;">
                <strong>レッスン4.4のフィールド技術</strong> × <strong>レッスン4.5のコンストラクタ技術</strong><br>
                = <strong>実用レベルの完全なクラス設計能力</strong><br><br>
                あなたは実務で通用する<strong>オブジェクト指向プログラマー</strong>です！
            </div>
        </div>
    </div>
</body>
</html>