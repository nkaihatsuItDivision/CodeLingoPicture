<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>バリデーション機能実装図</title>
    <style>
        body {
            font-family: 'Hiragino Sans', 'Yu Gothic', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        .title {
            text-align: center;
            color: #2c3e50;
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 40px;
            border-bottom: 3px solid #e74c3c;
            padding-bottom: 15px;
        }

        .subtitle {
            text-align: center;
            color: #7f8c8d;
            font-size: 16px;
            margin-bottom: 30px;
        }

        .overview-section {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
        }

        .overview-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .overview-text {
            font-size: 16px;
            line-height: 1.6;
        }

        .validation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .validation-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            border-left: 6px solid;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .validation-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }

        .notnull-card { border-left-color: #e74c3c; }
        .notblank-card { border-left-color: #f39c12; }
        .email-card { border-left-color: #3498db; }
        .size-card { border-left-color: #27ae60; }
        .pattern-card { border-left-color: #9b59b6; }
        .range-card { border-left-color: #1abc9c; }

        .validation-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .validation-icon {
            font-size: 28px;
            margin-right: 15px;
        }

        .validation-name {
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
        }

        .validation-description {
            color: #7f8c8d;
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .code-example {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            margin: 15px 0;
            position: relative;
        }

        .example-label {
            position: absolute;
            top: -10px;
            left: 15px;
            background: #e74c3c;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 11px;
            font-weight: bold;
        }

        .annotation {
            color: #f39c12;
            font-weight: bold;
        }

        .field {
            color: #27ae60;
        }

        .error-example {
            background: #fee;
            border: 1px solid #fcc;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .error-title {
            font-weight: bold;
            color: #e74c3c;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .error-message {
            color: #d63031;
            font-size: 13px;
            font-family: 'Courier New', monospace;
            line-height: 1.5;
        }

        .complete-example {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
        }

        .complete-title {
            text-align: center;
            color: #2c3e50;
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 25px;
        }

        .entity-example {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 25px;
            border-radius: 12px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            margin: 20px 0;
        }

        .validation-flow {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .flow-step {
            background: white;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-top: 4px solid;
            position: relative;
        }

        .step1 { border-top-color: #3498db; }
        .step2 { border-top-color: #f39c12; }
        .step3 { border-top-color: #e74c3c; }
        .step4 { border-top-color: #27ae60; }

        .step-number {
            display: inline-block;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #3498db;
            color: white;
            line-height: 30px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .step-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .step-description {
            color: #7f8c8d;
            font-size: 13px;
            line-height: 1.5;
        }

        .benefits-section {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
        }

        .benefits-title {
            text-align: center;
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 25px;
        }

        .benefits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .benefit-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            text-align: center;
        }

        .benefit-icon {
            font-size: 32px;
            margin-bottom: 15px;
            display: block;
        }

        .benefit-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #f39c12;
        }

        .benefit-text {
            font-size: 14px;
            line-height: 1.5;
        }

        .practical-tips {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
        }

        .tips-title {
            text-align: center;
            color: #2c3e50;
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 25px;
        }

        .tips-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .tip-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 5px solid;
        }

        .tip1 { border-left-color: #e74c3c; }
        .tip2 { border-left-color: #f39c12; }
        .tip3 { border-left-color: #27ae60; }

        .tip-header {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 16px;
        }

        .tip-content {
            color: #7f8c8d;
            font-size: 14px;
            line-height: 1.6;
        }

        .highlight-box {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-top: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .highlight-box::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .highlight-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .highlight-text {
            font-size: 16px;
            line-height: 1.6;
            position: relative;
            z-index: 1;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            .validation-grid {
                grid-template-columns: 1fr;
            }
            
            .validation-flow {
                grid-template-columns: 1fr;
            }
            
            .benefits-grid {
                grid-template-columns: 1fr;
            }
            
            .tips-grid {
                grid-template-columns: 1fr;
            }
        }

        .pulse-effect {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .float-effect {
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="title">バリデーション機能実装図</div>
        <div class="subtitle">データ整合性確保とエラー処理の完全ガイド</div>

        <div class="overview-section">
            <div class="overview-title">🛡️ Bean Validationによるデータ保護</div>
            <div class="overview-text">
                アノテーションベースの簡単設定で、データの整合性を確保！<br>
                不正なデータの侵入を防ぎ、ユーザーフレンドリーなエラーメッセージを提供
            </div>
        </div>

        <div class="validation-grid">
            <div class="validation-card notnull-card pulse-effect">
                <div class="validation-header">
                    <div class="validation-icon">❗</div>
                    <div class="validation-name">@NotNull</div>
                </div>
                <div class="validation-description">
                    null値の入力を禁止します。必須項目の基本的な検証に使用します。
                </div>
                <div class="code-example">
                    <div class="example-label">使用例</div>
                    <span class="annotation">@NotNull(message = "学生IDは必須です")</span><br>
                    <span class="field">private Long studentId;</span>
                </div>
                <div class="error-example">
                    <div class="error-title">🚫 エラー時の表示</div>
                    <div class="error-message">学生IDは必須です</div>
                </div>
            </div>

            <div class="validation-card notblank-card">
                <div class="validation-header">
                    <div class="validation-icon">📝</div>
                    <div class="validation-name">@NotBlank</div>
                </div>
                <div class="validation-description">
                    空文字列や空白のみの文字列を禁止します。文字列の実質的な入力を保証します。
                </div>
                <div class="code-example">
                    <div class="example-label">使用例</div>
                    <span class="annotation">@NotBlank(message = "名前を入力してください")</span><br>
                    <span class="field">private String name;</span>
                </div>
                <div class="error-example">
                    <div class="error-title">🚫 エラー時の表示</div>
                    <div class="error-message">名前を入力してください</div>
                </div>
            </div>

            <div class="validation-card email-card float-effect">
                <div class="validation-header">
                    <div class="validation-icon">📧</div>
                    <div class="validation-name">@Email</div>
                </div>
                <div class="validation-description">
                    正しいメールアドレス形式かを検証します。@マークや.comなどの形式チェックを自動実行。
                </div>
                <div class="code-example">
                    <div class="example-label">使用例</div>
                    <span class="annotation">@Email(message = "正しいメールアドレスを入力してください")</span><br>
                    <span class="field">private String email;</span>
                </div>
                <div class="error-example">
                    <div class="error-title">🚫 エラー時の表示</div>
                    <div class="error-message">正しいメールアドレスを入力してください</div>
                </div>
            </div>

            <div class="validation-card size-card">
                <div class="validation-header">
                    <div class="validation-icon">📏</div>
                    <div class="validation-name">@Size</div>
                </div>
                <div class="validation-description">
                    文字列の長さや配列のサイズを制限します。min/maxで範囲を指定可能。
                </div>
                <div class="code-example">
                    <div class="example-label">使用例</div>
                    <span class="annotation">@Size(min = 2, max = 50,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message = "名前は2文字以上50文字以下で入力してください")</span><br>
                    <span class="field">private String name;</span>
                </div>
                <div class="error-example">
                    <div class="error-title">🚫 エラー時の表示</div>
                    <div class="error-message">名前は2文字以上50文字以下で入力してください</div>
                </div>
            </div>

            <div class="validation-card pattern-card">
                <div class="validation-header">
                    <div class="validation-icon">🔍</div>
                    <div class="validation-name">@Pattern</div>
                </div>
                <div class="validation-description">
                    正規表現パターンによる詳細な形式チェック。電話番号や郵便番号の検証に最適。
                </div>
                <div class="code-example">
                    <div class="example-label">使用例</div>
                    <span class="annotation">@Pattern(regexp = "^[0-9]{3}-[0-9]{4}-[0-9]{4}$",<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message = "電話番号の形式が正しくありません")</span><br>
                    <span class="field">private String phoneNumber;</span>
                </div>
                <div class="error-example">
                    <div class="error-title">🚫 エラー時の表示</div>
                    <div class="error-message">電話番号の形式が正しくありません</div>
                </div>
            </div>

            <div class="validation-card range-card float-effect">
                <div class="validation-header">
                    <div class="validation-icon">🔢</div>
                    <div class="validation-name">@Min / @Max</div>
                </div>
                <div class="validation-description">
                    数値の最小値・最大値を制限します。年齢や得点の妥当性を保証。
                </div>
                <div class="code-example">
                    <div class="example-label">使用例</div>
                    <span class="annotation">@Min(value = 0, message = "年齢は0以上で入力してください")</span><br>
                    <span class="annotation">@Max(value = 120, message = "年齢は120以下で入力してください")</span><br>
                    <span class="field">private Integer age;</span>
                </div>
                <div class="error-example">
                    <div class="error-title">🚫 エラー時の表示</div>
                    <div class="error-message">年齢は0以上で入力してください</div>
                </div>
            </div>
        </div>

        <div class="complete-example">
            <div class="complete-title">🎯 完全なStudentエンティティ実装例</div>
            <div class="entity-example">
<span class="annotation">@Entity</span><br>
<span class="annotation">@Table(name = "students")</span><br>
<span class="annotation">@Data</span><br>
<span class="annotation">@NoArgsConstructor</span><br>
<span class="annotation">@AllArgsConstructor</span><br>
public class Student {<br><br>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation">@Id</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation">@GeneratedValue(strategy = GenerationType.IDENTITY)</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation">@NotNull(message = "学生IDは必須です")</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;private Long studentId;<br><br>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation">@Column(nullable = false, length = 50)</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation">@NotBlank(message = "名前を入力してください")</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation">@Size(min = 2, max = 50, message = "名前は2文字以上50文字以下です")</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;private String name;<br><br>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation">@Column(unique = true)</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation">@NotBlank(message = "メールアドレスを入力してください")</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation">@Email(message = "正しいメールアドレス形式で入力してください")</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;private String email;<br><br>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation">@Min(value = 0, message = "年齢は0以上で入力してください")</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation">@Max(value = 120, message = "年齢は120以下で入力してください")</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;private Integer age;<br><br>

&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation">@Column(name = "enrollment_date")</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="annotation">@NotNull(message = "入学日を入力してください")</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;private LocalDate enrollmentDate;<br>
}
            </div>
        </div>

        <div class="validation-flow">
            <div class="flow-step step1">
                <div class="step-number">1</div>
                <div class="step-title">データ入力</div>
                <div class="step-description">
                    ユーザーがフォームに<br>
                    データを入力
                </div>
            </div>

            <div class="flow-step step2">
                <div class="step-number">2</div>
                <div class="step-title">自動検証</div>
                <div class="step-description">
                    バリデーションアノテーションが<br>
                    自動的にデータをチェック
                </div>
            </div>

            <div class="flow-step step3">
                <div class="step-number">3</div>
                <div class="step-title">エラー検出</div>
                <div class="step-description">
                    不正データがあれば<br>
                    即座にエラーを報告
                </div>
            </div>

            <div class="flow-step step4">
                <div class="step-number">4</div>
                <div class="step-title">安全保存</div>
                <div class="step-description">
                    検証済みの正しいデータのみ<br>
                    データベースに保存
                </div>
            </div>
        </div>

        <div class="benefits-section">
            <div class="benefits-title">🚀 バリデーション機能の具体的メリット</div>
            <div class="benefits-grid">
                <div class="benefit-item">
                    <span class="benefit-icon">🛡️</span>
                    <div class="benefit-title">データ品質保証</div>
                    <div class="benefit-text">
                        不正データの侵入を
                        完全にブロック
                    </div>
                </div>

                <div class="benefit-item">
                    <span class="benefit-icon">⚡</span>
                    <div class="benefit-title">開発効率向上</div>
                    <div class="benefit-text">
                        手動チェック不要で
                        開発時間を大幅短縮
                    </div>
                </div>

                <div class="benefit-item">
                    <span class="benefit-icon">😊</span>
                    <div class="benefit-title">UX向上</div>
                    <div class="benefit-text">
                        わかりやすいエラーメッセージで
                        ユーザビリティ向上
                    </div>
                </div>

                <div class="benefit-item">
                    <span class="benefit-icon">🔧</span>
                    <div class="benefit-title">保守性向上</div>
                    <div class="benefit-text">
                        一箇所での設定で
                        全体の検証ルール管理
                    </div>
                </div>

                <div class="benefit-item">
                    <span class="benefit-icon">🎯</span>
                    <div class="benefit-title">標準化</div>
                    <div class="benefit-text">
                        Bean Validation標準で
                        一貫した検証実装
                    </div>
                </div>

                <div class="benefit-item">
                    <span class="benefit-icon">🚀</span>
                    <div class="benefit-title">拡張性</div>
                    <div class="benefit-text">
                        カスタムバリデータで
                        独自ルールも簡単実装
                    </div>
                </div>
            </div>
        </div>

        <div class="practical-tips">
            <div class="tips-title">💡 実践的なバリデーション設計のコツ</div>
            <div class="tips-grid">
                <div class="tip-card tip1">
                    <div class="tip-header">🎯 エラーメッセージの工夫</div>
                    <div class="tip-content">
                        ユーザーにとってわかりやすく、具体的な解決方法を示すメッセージを設定。<br>
                        例：「正しいメールアドレス形式で入力してください（例：user@example.com）」
                    </div>
                </div>

                <div class="tip-card tip2">
                    <div class="tip-header">📏 適切な制限値の設定</div>
                    <div class="tip-content">
                        現実的で合理的な制限値を設定。年齢なら0-120、名前なら2-50文字など、<br>
                        実際の利用場面を考慮した妥当な範囲を指定。
                    </div>
                </div>

                <div class="tip-card tip3">
                    <div class="tip-header">🔄 複数バリデーションの組み合わせ</div>
                    <div class="tip-content">
                        @NotBlank + @Size + @Email のように複数のバリデーションを組み合わせて、<br>
                        より堅牢なデータ検証を実現。
                    </div>
                </div>
            </div>
        </div>

        <div class="highlight-box">
            <div class="highlight-title">🎯 Week 8.5での重要ポイント</div>
            <div class="highlight-text">
                バリデーション機能により、データの整合性が自動的に保証されます。<br>
                ユーザーフレンドリーなエラーメッセージで、使いやすいシステムを構築！<br>
                Week 8.6以降では、この基盤により安全なデータ操作が実現されます。
            </div>
        </div>
    </div>
</body>
</html>