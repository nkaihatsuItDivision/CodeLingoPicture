<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSVãƒ‡ãƒ¼ã‚¿å‡¦ç†ã®æ§‹é€ èª¬æ˜å›³ - Java Week3 Lesson7</title>
    <style>
        body {
            font-family: 'Hiragino Sans', 'Yu Gothic', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2d3436 0%, #636e72 100%);
            color: white;
            padding: 25px;
            text-align: center;
        }

        .header h1 {
            margin: 0;
            font-size: 28px;
            font-weight: bold;
        }

        .header p {
            margin: 10px 0 0 0;
            font-size: 16px;
            opacity: 0.9;
        }

        .section {
            padding: 30px;
            border-bottom: 1px solid #ecf0f1;
        }

        .section:last-child {
            border-bottom: none;
        }

        .section-title {
            background: linear-gradient(135deg, #00b894 0%, #00a085 100%);
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 25px;
            text-align: center;
        }

        .comparison-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .method-box {
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            background: #f8f9fa;
        }

        .basic-method {
            border-color: #e74c3c;
        }

        .safe-method {
            border-color: #27ae60;
        }

        .method-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }

        .basic-method .method-title {
            color: #e74c3c;
        }

        .safe-method .method-title {
            color: #27ae60;
        }

        .csv-sample {
            background: #2d3436;
            color: #ddd;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            margin: 15px 0;
            overflow-x: auto;
            position: relative;
        }

        .csv-sample::before {
            content: "CSV ãƒ‡ãƒ¼ã‚¿";
            position: absolute;
            top: -12px;
            left: 10px;
            background: #2d3436;
            color: #74b9ff;
            padding: 2px 8px;
            font-size: 11px;
            border-radius: 3px;
        }

        .highlighted-comma {
            background: #e74c3c;
            color: white;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: bold;
        }

        .safe-comma {
            background: #27ae60;
            color: white;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: bold;
        }

        .quote-highlight {
            background: #f39c12;
            color: white;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: bold;
        }

        .result-box {
            background: #ecf0f1;
            border: 1px solid #bdc3c7;
            border-radius: 6px;
            padding: 15px;
            margin: 15px 0;
        }

        .result-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .result-item {
            background: white;
            padding: 8px 12px;
            margin: 5px 0;
            border-radius: 4px;
            border-left: 4px solid #3498db;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }

        .error-result {
            border-left-color: #e74c3c;
            background: #fdf2f2;
        }

        .success-result {
            border-left-color: #27ae60;
            background: #f2fdf5;
        }

        .process-flow {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin: 25px 0;
        }

        .process-step {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 20px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 10px;
            border-left: 5px solid #3498db;
        }

        .step-number {
            background: #3498db;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
            flex-shrink: 0;
        }

        .step-content {
            flex: 1;
        }

        .step-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .step-description {
            color: #7f8c8d;
            font-size: 14px;
            line-height: 1.4;
        }

        .code-example {
            background: #2d3436;
            color: #ddd;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            margin: 10px 0;
            overflow-x: auto;
        }

        .variable {
            color: #74b9ff;
        }

        .string {
            color: #55a3ff;
        }

        .keyword {
            color: #fd79a8;
        }

        .comment {
            color: #636e72;
            font-style: italic;
        }

        .arrow {
            text-align: center;
            font-size: 24px;
            color: #3498db;
            margin: 10px 0;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        .legend-color {
            width: 20px;
            height: 15px;
            border-radius: 3px;
        }

        .comma-color { background: #e74c3c; }
        .quote-color { background: #f39c12; }
        .safe-color { background: #27ae60; }

        .warning-box {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-left: 4px solid #fdcb6e;
            padding: 15px;
            border-radius: 6px;
            margin: 20px 0;
        }

        .warning-title {
            font-weight: bold;
            color: #8b7800;
            margin-bottom: 8px;
        }

        .tip-box {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            border-left: 4px solid #17a2b8;
            padding: 15px;
            border-radius: 6px;
            margin: 20px 0;
        }

        .tip-title {
            font-weight: bold;
            color: #0c5460;
            margin-bottom: 8px;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 10px;
            }
            
            .section {
                padding: 20px;
            }
            
            .comparison-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .legend {
                gap: 15px;
            }
            
            .process-step {
                flex-direction: column;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“Š CSVãƒ‡ãƒ¼ã‚¿å‡¦ç†ã®æ§‹é€ èª¬æ˜å›³</h1>
            <p>Java Week 3 Lesson 7 - å®‰å…¨ãªCSVåˆ†å‰²ã®ä»•çµ„ã¿ã¨å®Ÿè£…</p>
        </div>

        <!-- å•é¡Œã®èª¬æ˜ -->
        <div class="section">
            <div class="section-title">ğŸš¨ CSVãƒ‡ãƒ¼ã‚¿å‡¦ç†ã®å•é¡Œç‚¹</div>
            
            <div class="csv-sample">
P003<span class="highlighted-comma">,</span><span class="quote-highlight">"</span>é«˜ç´šãƒœãƒ¼ãƒ«ãƒšãƒ³<span class="highlighted-comma">,</span>é»’<span class="quote-highlight">"</span><span class="highlighted-comma">,</span>1200<span class="highlighted-comma">,</span>50<span class="highlighted-comma">,</span>æ–‡æˆ¿å…·
            </div>

            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color comma-color"></div>
                    <span>åˆ†å‰²ã™ã¹ãã‚«ãƒ³ãƒ</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color quote-color"></div>
                    <span>å¼•ç”¨ç¬¦ï¼ˆãƒ‡ãƒ¼ã‚¿ã®å¢ƒç•Œï¼‰</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color safe-color"></div>
                    <span>ä¿è­·ã•ã‚ŒãŸã‚«ãƒ³ãƒ</span>
                </div>
            </div>

            <div class="comparison-container">
                <div class="method-box basic-method">
                    <div class="method-title">âŒ åŸºæœ¬çš„ãªsplit()ã®å•é¡Œ</div>
                    <div class="code-example">
<span class="variable">String</span>[] parts = line.<span class="keyword">split</span>(<span class="string">","</span>);
<span class="comment">// å…¨ã¦ã®ã‚«ãƒ³ãƒã§åˆ†å‰²ã—ã¦ã—ã¾ã†</span>
                    </div>
                    <div class="result-box">
                        <div class="result-title">åˆ†å‰²çµæœï¼š</div>
                        <div class="result-item error-result">[0] P003</div>
                        <div class="result-item error-result">[1] "é«˜ç´šãƒœãƒ¼ãƒ«ãƒšãƒ³</div>
                        <div class="result-item error-result">[2] é»’"</div>
                        <div class="result-item error-result">[3] 1200</div>
                        <div class="result-item error-result">[4] 50</div>
                        <div class="result-item error-result">[5] æ–‡æˆ¿å…·</div>
                    </div>
                    <div class="warning-box">
                        <div class="warning-title">âš ï¸ å•é¡Œç‚¹</div>
                        å•†å“åã€Œé«˜ç´šãƒœãƒ¼ãƒ«ãƒšãƒ³,é»’ã€ãŒ[1]ã¨[2]ã«åˆ†å‰²ã•ã‚Œã¦ã—ã¾ã„ã€ãƒ‡ãƒ¼ã‚¿ãŒç ´æ
                    </div>
                </div>

                <div class="method-box safe-method">
                    <div class="method-title">âœ… å®‰å…¨ãªparseSafeCSV()ã®è§£æ±º</div>
                    <div class="code-example">
<span class="variable">String</span>[] parts = <span class="keyword">parseSafeCSV</span>(line);
<span class="comment">// å¼•ç”¨ç¬¦ã‚’è€ƒæ…®ã—ãŸåˆ†å‰²</span>
                    </div>
                    <div class="result-box">
                        <div class="result-title">åˆ†å‰²çµæœï¼š</div>
                        <div class="result-item success-result">[0] P003</div>
                        <div class="result-item success-result">[1] é«˜ç´šãƒœãƒ¼ãƒ«ãƒšãƒ³,é»’</div>
                        <div class="result-item success-result">[2] 1200</div>
                        <div class="result-item success-result">[3] 50</div>
                        <div class="result-item success-result">[4] æ–‡æˆ¿å…·</div>
                    </div>
                    <div class="tip-box">
                        <div class="tip-title">ğŸ’¡ è§£æ±º</div>
                        å¼•ç”¨ç¬¦å†…ã®ã‚«ãƒ³ãƒã¯åˆ†å‰²å¯¾è±¡å¤–ã¨ã—ã¦æ­£ã—ãå‡¦ç†ã•ã‚Œã€ãƒ‡ãƒ¼ã‚¿ã®æ•´åˆæ€§ã‚’ä¿æŒ
                    </div>
                </div>
            </div>
        </div>

        <!-- å‡¦ç†ãƒ•ãƒ­ãƒ¼ã®èª¬æ˜ -->
        <div class="section">
            <div class="section-title">âš™ï¸ parseSafeCSV()ãƒ¡ã‚½ãƒƒãƒ‰ã®å‡¦ç†ãƒ•ãƒ­ãƒ¼</div>
            
            <div class="process-flow">
                <div class="process-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <div class="step-title">åˆæœŸåŒ–</div>
                        <div class="step-description">ArrayList&lt;String&gt; columns ã¨StringBuilder currentColumn ã‚’æº–å‚™<br>
                        boolean insideQuotes = false ã§å¼•ç”¨ç¬¦ã®å†…å¤–çŠ¶æ…‹ã‚’ç®¡ç†</div>
                    </div>
                </div>

                <div class="process-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <div class="step-title">æ–‡å­—åˆ—ã‚’1æ–‡å­—ãšã¤å‡¦ç†</div>
                        <div class="step-description">for (int i = 0; i &lt; line.length(); i++) ã§ãƒ«ãƒ¼ãƒ—é–‹å§‹<br>
                        char c = line.charAt(i) ã§ç¾åœ¨ã®æ–‡å­—ã‚’å–å¾—</div>
                    </div>
                </div>

                <div class="process-step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <div class="step-title">å¼•ç”¨ç¬¦ã®åˆ¤å®š</div>
                        <div class="step-description">if (c == '"') â†’ insideQuotes = !insideQuotes<br>
                        å¼•ç”¨ç¬¦ãŒè¦‹ã¤ã‹ã£ãŸã‚‰å†…å¤–çŠ¶æ…‹ã‚’åˆ‡ã‚Šæ›¿ãˆï¼ˆå¼•ç”¨ç¬¦è‡ªä½“ã¯çµæœã«å«ã‚ãªã„ï¼‰</div>
                    </div>
                </div>

                <div class="process-step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <div class="step-title">ã‚«ãƒ³ãƒã®å‡¦ç†</div>
                        <div class="step-description">if (c == ',' && !insideQuotes) â†’ åˆ†å‰²ãƒã‚¤ãƒ³ãƒˆ<br>
                        å¼•ç”¨ç¬¦å¤–ã®ã‚«ãƒ³ãƒã§ã®ã¿åˆ—ã‚’åŒºåˆ‡ã‚Šã€å¼•ç”¨ç¬¦å†…ã®ã‚«ãƒ³ãƒã¯é€šå¸¸æ–‡å­—ã¨ã—ã¦æ‰±ã†</div>
                    </div>
                </div>

                <div class="process-step">
                    <div class="step-number">5</div>
                    <div class="step-content">
                        <div class="step-title">é€šå¸¸æ–‡å­—ã®è¿½åŠ </div>
                        <div class="step-description">else â†’ currentColumn.append(c)<br>
                        å¼•ç”¨ç¬¦ã¨ã‚«ãƒ³ãƒä»¥å¤–ã®æ–‡å­—ã¯ç¾åœ¨ã®åˆ—ã«è¿½åŠ </div>
                    </div>
                </div>

                <div class="process-step">
                    <div class="step-number">6</div>
                    <div class="step-content">
                        <div class="step-title">æœ€çµ‚åˆ—ã®è¿½åŠ </div>
                        <div class="step-description">ãƒ«ãƒ¼ãƒ—çµ‚äº†å¾Œã€æœ€å¾Œã®åˆ—ã‚’ArrayListã«è¿½åŠ <br>
                        return columns.toArray(new String[0]) ã§é…åˆ—ã¨ã—ã¦è¿”å´</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- å®Ÿè£…ä¾‹ -->
        <div class="section">
            <div class="section-title">ğŸ’» å®Ÿè£…ã‚³ãƒ¼ãƒ‰ä¾‹</div>
            
            <div class="code-example">
<span class="keyword">public static</span> <span class="variable">String</span>[] <span class="keyword">parseSafeCSV</span>(<span class="variable">String</span> line) {
    <span class="variable">ArrayList</span>&lt;<span class="variable">String</span>&gt; columns = <span class="keyword">new</span> <span class="variable">ArrayList</span>&lt;&gt;();
    <span class="variable">StringBuilder</span> currentColumn = <span class="keyword">new</span> <span class="variable">StringBuilder</span>();
    <span class="variable">boolean</span> insideQuotes = <span class="keyword">false</span>;
    
    <span class="keyword">for</span> (<span class="variable">int</span> i = <span class="string">0</span>; i &lt; line.<span class="keyword">length</span>(); i++) {
        <span class="variable">char</span> c = line.<span class="keyword">charAt</span>(i);
        
        <span class="keyword">if</span> (c == <span class="string">'"'</span>) {
            insideQuotes = !insideQuotes;  <span class="comment">// å¼•ç”¨ç¬¦ã®å†…å¤–ã‚’åˆ‡ã‚Šæ›¿ãˆ</span>
        } <span class="keyword">else if</span> (c == <span class="string">','</span> && !insideQuotes) {
            <span class="comment">// å¼•ç”¨ç¬¦å¤–ã®ã‚«ãƒ³ãƒã§åˆ†å‰²</span>
            columns.<span class="keyword">add</span>(currentColumn.<span class="keyword">toString</span>().<span class="keyword">trim</span>());
            currentColumn = <span class="keyword">new</span> <span class="variable">StringBuilder</span>();
        } <span class="keyword">else</span> {
            currentColumn.<span class="keyword">append</span>(c);
        }
    }
    
    <span class="comment">// æœ€å¾Œã®åˆ—ã‚’è¿½åŠ </span>
    columns.<span class="keyword">add</span>(currentColumn.<span class="keyword">toString</span>().<span class="keyword">trim</span>());
    
    <span class="keyword">return</span> columns.<span class="keyword">toArray</span>(<span class="keyword">new</span> <span class="variable">String</span>[<span class="string">0</span>]);
}
            </div>
        </div>

        <!-- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° -->
        <div class="section">
            <div class="section-title">ğŸ›¡ï¸ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨å®‰å…¨æ€§</div>
            
            <div class="comparison-container">
                <div class="method-box">
                    <div class="method-title" style="color: #e67e22;">ğŸ” è€ƒæ…®ã™ã¹ãã‚±ãƒ¼ã‚¹</div>
                    <div class="result-box">
                        <div class="result-item">ç©ºè¡Œã®å‡¦ç†</div>
                        <div class="result-item">nullå€¤ã®å‡¦ç†</div>
                        <div class="result-item">åˆ—æ•°ã®ä¸ä¸€è‡´</div>
                        <div class="result-item">ä¸æ­£ãªå¼•ç”¨ç¬¦ï¼ˆé–‰ã˜å¿˜ã‚Œï¼‰</div>
                        <div class="result-item">ç©ºã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰</div>
                    </div>
                </div>

                <div class="method-box">
                    <div class="method-title" style="color: #27ae60;">âœ… å¯¾å¿œç­–</div>
                    <div class="code-example">
<span class="comment">// å®‰å…¨ãªåˆ—å–å¾—</span>
<span class="keyword">public static</span> <span class="variable">String</span> <span class="keyword">getColumnSafe</span>(<span class="variable">String</span>[] columns, <span class="variable">int</span> index) {
    <span class="keyword">if</span> (columns == <span class="keyword">null</span> || index >= columns.<span class="keyword">length</span>) {
        <span class="keyword">return</span> <span class="string">"(æœªè¨­å®š)"</span>;
    }
    
    <span class="variable">String</span> value = columns[index];
    <span class="keyword">return</span> (value == <span class="keyword">null</span> || value.<span class="keyword">isEmpty</span>()) ? 
           <span class="string">"(ç©º)"</span> : value;
}
                    </div>
                </div>
            </div>

            <div class="tip-box">
                <div class="tip-title">ğŸ’¡ å®Ÿç”¨çš„ãªãƒã‚¤ãƒ³ãƒˆ</div>
                <ul>
                    <li><strong>æ®µéšçš„å‡¦ç†</strong>ï¼šã¾ãšã¯åŸºæœ¬æ©Ÿèƒ½ã€æ¬¡ã«ä¾‹å¤–å‡¦ç†ã‚’è¿½åŠ </li>
                    <li><strong>é˜²å¾¡çš„ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°</strong>ï¼šæƒ³å®šå¤–ã®ãƒ‡ãƒ¼ã‚¿ã§ã‚‚ã‚¨ãƒ©ãƒ¼ã‚’é¿ã‘ã‚‹</li>
                    <li><strong>ãƒ­ã‚°å‡ºåŠ›</strong>ï¼šå‡¦ç†ã§ããªã‹ã£ãŸãƒ‡ãƒ¼ã‚¿ã®è¨˜éŒ²</li>
                    <li><strong>ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿</strong>ï¼šæ§˜ã€…ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã®å‹•ä½œç¢ºèª</li>
                </ul>
            </div>
        </div>

        <!-- ã¾ã¨ã‚ -->
        <div class="section">
            <div class="section-title">ğŸ¯ å­¦ç¿’ã®ã¾ã¨ã‚</div>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                <div class="warning-box">
                    <div class="warning-title">âš ï¸ åŸºæœ¬split()ã®é™ç•Œ</div>
                    å˜ç´”ãªæ–‡å­—åˆ—åˆ†å‰²ã§ã¯ã€å¼•ç”¨ç¬¦å†…ã®ã‚«ãƒ³ãƒã‚’åŒºåˆ¥ã§ããšã€ãƒ‡ãƒ¼ã‚¿ãŒç ´æã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹
                </div>
                
                <div class="tip-box">
                    <div class="tip-title">ğŸ’ª å®‰å…¨ãªè§£æã®ä¾¡å€¤</div>
                    parseSafeCSV()ã«ã‚ˆã‚Šã€å¼•ç”¨ç¬¦ã‚’è€ƒæ…®ã—ãŸæ­£ç¢ºãªãƒ‡ãƒ¼ã‚¿åˆ†å‰²ãŒå¯èƒ½ã¨ãªã‚Šã€å®Ÿç”¨çš„ãªCSVå‡¦ç†ã‚’å®Ÿç¾
                </div>
            </div>

            <div style="background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%); color: white; padding: 20px; border-radius: 10px; text-align: center; margin-top: 20px;">
                <h3 style="margin: 0 0 10px 0;">ğŸš€ å®Ÿå‹™ã§ã®å¿œç”¨</h3>
                <p style="margin: 0; font-size: 16px;">ã“ã®æŠ€è¡“ã«ã‚ˆã‚Šã€Excelå‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã€ã‚·ã‚¹ãƒ†ãƒ é€£æºãƒ‡ãƒ¼ã‚¿ã€ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ãªã©ã€<br>å®Ÿéš›ã®ãƒ“ã‚¸ãƒã‚¹ã§æ‰±ã†è¤‡é›‘ãªCSVãƒ‡ãƒ¼ã‚¿ã‚’å®‰å…¨ã«å‡¦ç†ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™</p>
            </div>
        </div>
    </div>
</body>
</html>